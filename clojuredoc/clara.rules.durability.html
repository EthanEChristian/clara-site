<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clara.rules.durability documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clara-rules 0.9.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clara</span></div></div></li><li class="depth-2 branch"><a href="clara.macros.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>macros</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rules</span></div></div></li><li class="depth-3 branch"><a href="clara.rules.dsl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dsl</span></div></a></li><li class="depth-3 branch current"><a href="clara.rules.durability.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>durability</span></div></a></li><li class="depth-3"><a href="clara.rules.schema.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>schema</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>tools</span></div></div></li><li class="depth-3 branch"><a href="clara.tools.inspect.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>inspect</span></div></a></li><li class="depth-3 branch"><a href="clara.tools.tracing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tracing</span></div></a></li><li class="depth-3"><a href="clara.tools.viz.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>viz</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clara.rules.durability.html#var-restore-session-state"><div class="inner"><span>restore-session-state</span></div></a></li><li class="depth-1"><a href="clara.rules.durability.html#var-session-state"><div class="inner"><span>session-state</span></div></a></li><li class="depth-1"><a href="clara.rules.durability.html#var-session-state-schema"><div class="inner"><span>session-state-schema</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">clara.rules.durability</h2><div class="doc"><pre class="plaintext">Experimental namespace. This may change non-passively without warning.

Support for persisting Clara sessions to an external store. This will have two models: obtaining the full
state of a session, and obtaining a &quot;diff&quot; of changes from a previous state.

See the session-state function to retrieve the full state of a session as a data structure that can
be easily serialized via EDN or Fressian. Sessions can then be recovered with the restore-session-state function.

TODO: diff support is pending -- functions for obtaining a diff of state from a previous point, allowing for a write-ahead log.</pre></div><div class="public anchor" id="var-restore-session-state"><h3>restore-session-state</h3><div class="usage"><code>(restore-session-state session {:keys [fact-counts], :as session-state})</code></div><div class="doc"><pre class="plaintext">Inputs: [session {:keys [fact-counts], :as session-state} :- session-state-schema]

Restore the given session to have the provided session state. The given session should be
a newly-created session that was created with the same parameters as the session that was
serialized. For instance, it should use the same rulesets, type function, and other settings.

This function returns a new session instance that reflects the given saved state.  The returned
session should be indistinguishable from the session that had its state saved.</pre></div></div><div class="public anchor" id="var-session-state"><h3>session-state</h3><div class="usage"><code>(session-state session)</code></div><div class="doc"><pre class="plaintext">Inputs: [session]
Returns: session-state-schema

 Returns the state of a session as an EDN- or Fressian-serializable data structure. The returned
 structure contains only the minimal data necessary to reconstruct the session via the restore-session-state
 function below.</pre></div></div><div class="public anchor" id="var-session-state-schema"><h3>session-state-schema</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div></div></body></html>