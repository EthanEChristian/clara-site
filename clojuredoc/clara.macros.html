<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clara.macros documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clara-rules 0.9.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clara</span></div></div></li><li class="depth-2 branch current"><a href="clara.macros.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>macros</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rules</span></div></div></li><li class="depth-3 branch"><a href="clara.rules.dsl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dsl</span></div></a></li><li class="depth-3 branch"><a href="clara.rules.durability.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>durability</span></div></a></li><li class="depth-3"><a href="clara.rules.schema.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>schema</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>tools</span></div></div></li><li class="depth-3 branch"><a href="clara.tools.inspect.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>inspect</span></div></a></li><li class="depth-3 branch"><a href="clara.tools.tracing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tracing</span></div></a></li><li class="depth-3"><a href="clara.tools.viz.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>viz</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clara.macros.html#var-defquery"><div class="inner"><span>defquery</span></div></a></li><li class="depth-1"><a href="clara.macros.html#var-defrule"><div class="inner"><span>defrule</span></div></a></li><li class="depth-1"><a href="clara.macros.html#var-defsession"><div class="inner"><span>defsession</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">clara.macros</h2><div class="doc"><pre class="plaintext">Direct use of this namespace is deprecated. Users can now
simply use the defrule, defquery, and defsession macros
in the clara.rules namespace. Users can simply pull those macros
in like any other, for instance:

(:require [clara.rules :refer [insert fire-rules query insert!]
                       :refer-macros [defrule defsession defquery]])</pre></div><div class="public anchor" id="var-defquery"><h3>defquery</h3><h4 class="type">macro</h4><div class="usage"><code>(defquery name &amp; body)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-defrule"><h3>defrule</h3><h4 class="type">macro</h4><div class="usage"><code>(defrule name &amp; body)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-defsession"><h3>defsession</h3><h4 class="type">macro</h4><div class="usage"><code>(defsession name &amp; sources-and-options)</code></div><div class="doc"><pre class="plaintext">Creates a sesson given a list of sources and keyword-style options, which are typically ClojureScript namespaces.

  Each source is eval'ed at compile time, in Clojure (not ClojureScript.)

  If the eval result is a symbol, it is presumed to be a ClojureScript
  namespace, and all rules and queries defined in that namespace will
  be found and used.

  If the eval result is a collection, it is presumed to be a
  collection of productions. Note that although the collection must
  exist in the compiling Clojure runtime (since the eval happens at
  macro-expansion time), any expressions in the rule or query
  definitions will be executed in ClojureScript.

  Typical usage would be like this, with a session defined as a var:

(defsession my-session 'example.namespace)

That var contains an immutable session that then can be used as a starting point to create sessions with
caller-provided data. Since the session itself is immutable, it can be safely used from multiple threads
and will not be modified by callers. So a user might grab it, insert facts, and otherwise
use it as follows:

   (-&gt; my-session
     (insert (-&gt;Temperature 23))
     (fire-rules))</pre></div></div></div></body></html>